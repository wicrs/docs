openapi: 3.0.0
info:
  title: WICRS API
  description: The API for WICRS.
  contact:
    name: WICRS Repositories
    url: https://github.com/wicrs
    email: none@example.com
  license:
    name: GNU General Public License v3.0
    url: https://github.com/wicrs/docs/blob/master/LICENSE
  version: v2
servers:
- url: http://localhost:8080/v2
  description: Local testing environement
- url: https://virtserver.swaggerhub.com/wicrs/wicrs/v2
  description: SwaggerHub API Auto Mocking
security:
- user_token_auth: []
tags:
- name: auth
  description: Operations related to authentication
- name: user
  description: Operations related to users
- name: group
  description: Operations related to permission groups
- name: hub
  description: Operations related to hubs
- name: channel
  description: Operations related to channels in hubs
- name: message
  description: Operations related to messages
paths:
  /login/{service}:
    get:
      tags:
      - auth
      description: Start the OAuth login sequence
      operationId: oauthStart
      parameters:
      - name: service
        in: path
        description: OAuth service to use
        required: true
        style: simple
        explode: false
        schema:
          type: string
          enum:
          - GitHub
      responses:
        "302":
          description: Redirect to the chosen OAuth service's API.
  /auth/{service}:
    get:
      tags:
      - auth
      description: Finish the OAuth login sequence
      operationId: oauthFinish
      parameters:
      - name: code
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: state
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: service
        in: path
        description: OAuth service used in the oauthStart step
        required: true
        style: simple
        explode: false
        schema:
          type: string
          enum:
          - GitHub
      responses:
        "200":
          description: Authentication success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: Invalid state/code pair given
  /invalidate_tokens:
    post:
      tags:
      - auth
      description: Invalidate all authentication tokens for the authenticated user.
      operationId: invalidateTokes
      responses:
        "200":
          description: Successfully invalidated all authentication tokens for the
            authenticated user.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /user:
    get:
      tags:
      - user
      description: Get the information of the authenticated user
      operationId: userGet
      responses:
        "200":
          description: A single user
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/user'
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /user/change_name/{new_name}:
    put:
      description: Change the username of the authenticated user
      operationId: userChangeName
      parameters:
      - name: new_name
        in: path
        description: New username
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Success,
          content:
            text/plain:
              schema:
                type: string
                description: Previous username
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /user/{id}:
    get:
      tags:
      - user
      description: Get the public information of another user
      operationId: userGetOther
      parameters:
      - name: id
        in: path
        description: ID of the user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: A single user with personal information removed (email and
            oauth service used, as well as the UUIDs of hubs they are members of,
            replaced with SHA256 hashes)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/user'
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /hub/create/{name}:
    post:
      tags:
      - hub
      description: Create a new hub owned by the authenticated user
      operationId: hubCreate
      parameters:
      - name: name
        in: path
        description: Name for the new hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Hub creation success, gives ID string
          content:
            text/plain:
              schema:
                type: string
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "500":
          description: Unable to create the new hub.
  /hub/{hub_id}:
    get:
      tags:
      - hub
      description: Get a hub
      operationId: hubGet
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Hub info
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/hub'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
        "500":
          description: Unable to load the hub data.
    delete:
      tags:
      - hub
      description: Delete a hub
      operationId: hubDelete
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Hub deletion success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
        "500":
          description: Unable to delete the hub.
  /hub/rename/{hub_id}:
    put:
      tags:
      - hub
      description: Rename a hub
      operationId: hubRename
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: name
        in: query
        description: The new name for the hub
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Hub deletion success
          content:
            text/plain:
              schema:
                type: string
                description: The previous name of the hub
                example: Test Hub 1
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
  /hub/{hub_id}/is_banned/{user_id}:
    get:
      tags:
      - hub
      description: Check if a user is banned from a hub
      operationId: hubBanCheck
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User ban status
          content:
            text/plain:
              schema:
                type: boolean
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /hub/{hub_id}/is_muted/{user_id}:
    get:
      tags:
      - hub
      description: Check if a user is muted in a hub
      operationId: hubMuteCheck
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User mute status
          content:
            text/plain:
              schema:
                type: boolean
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}:
    get:
      tags:
      - hub
      description: Get information on a member of a hub
      operationId: hubMemberGet
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Hub member get success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/hub_member'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}/ban:
    post:
      tags:
      - hub
      description: Ban a user from a hub
      operationId: hubBanUser
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User ban success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}/unban:
    post:
      tags:
      - hub
      description: Unban a user from a hub
      operationId: hubUnbanUser
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User unban success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}/kick:
    post:
      tags:
      - hub
      description: Kick a user from a hub
      operationId: hubKickUser
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User kick success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}/mute:
    post:
      tags:
      - hub
      description: Mute a user in a hub
      operationId: hubMuteUser
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User mute success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /member/{hub_id}/{user_id}/unmute:
    post:
      tags:
      - hub
      description: Unmute a user in a hub
      operationId: hubUnmuteUser
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        description: UUID of a user
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: User unmute success
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /channel/create/{hub_id}/{name}:
    post:
      tags:
      - channel
      description: Create a new channel in a hub
      operationId: hubChannelCreate
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: name
        in: path
        description: Name of the channel
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Channel creation success
          content:
            text/plain:
              schema:
                type: string
                description: The UUID of the new channel
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /channel/rename/{hub_id}/{channel_id}:
    put:
      tags:
      - channel
      description: Create a new channel in a hub
      operationId: hubChannelRename
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: new_name
        in: query
        description: New name for the channel
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Channel rename success
          content:
            text/plain:
              schema:
                type: string
                description: The channel's previous name
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "400":
          description: Malformed request.
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
  /channel/delete/{hub_id}/{channel_id}:
    delete:
      tags:
      - channel
      description: Delete a channel in a hub
      operationId: hubChannelDelete
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Channel deletion success
          content:
            text/plain:
              schema:
                type: string
                description: The name of the deleted channel
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
  /channel/{hub_id}/{channel_id}:
    get:
      tags:
      - channel
      description: Get channel metadata
      operationId: hubChannelGet
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Channel get success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/channel'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
  /channel/{hub_id}/{channel_id}/search_for/{term}:
    get:
      tags:
      - message
      description: Search for messages in the a channel
      operationId: hubChannelSearchMessages
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: term
        in: path
        description: String to search for
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: max
        in: query
        description: Maximum number of results
        required: false
        style: form
        explode: true
        schema:
          maximum: 1024
          minimum: 1
          type: integer
          default: 128
      responses:
        "200":
          description: Got messages successfully
          content:
            application/json:
              schema:
                type: array
                description: Array containing all messages found
                items:
                  $ref: '#/components/schemas/message'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
  /channel/{hub_id}/{channel_id}/last_messages:
    get:
      tags:
      - message
      description: Send a message in a channel
      operationId: hubChannelGetLastNMessages
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: count
        in: query
        description: Number of messages to get
        required: false
        style: form
        explode: true
        schema:
          maximum: 1024
          minimum: 1
          type: integer
          default: 128
      - name: from
        in: query
        description: Message to start getting messages from, if empty starts from
          last message sent in channel
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Got messages successfully
          content:
            application/json:
              schema:
                type: array
                description: Array containing the number of messages requested or
                  less if the channel did not have enough
                items:
                  $ref: '#/components/schemas/message'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
  /channel/{hub_id}/{channel_id}/send_message:
    post:
      tags:
      - message
      description: Send a message in a channel
      operationId: hubChannelSendMessage
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: message
        in: query
        description: Contents of the message
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: Message sent successfully
          content:
            text/plain:
              schema:
                type: string
                description: UUID of the message
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
  /message/{hub_id}/{channel_id}/{message_id}:
    get:
      tags:
      - message
      description: Get a message from a channel by it's ID
      operationId: hubChannelGetMessage
      parameters:
      - name: hub_id
        in: path
        description: UUID of a hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: channel_id
        in: path
        description: UUID of a channel in the hub
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: message_id
        in: path
        description: UUID of a message in the channel
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: Message get success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/message'
        "404":
          description: Resource does not exist or user does not have permission to
            access it
        "403":
          description: The authenticated user does not have permission to perform
            the action
          content:
            text/plain:
              schema:
                type: string
                description: Permission required to perform the operation
                enum:
                - All
                - ViewChannel
                - Configure
                - SendMessage
                - ReadMessage
                - Administrate
                - CreateChannel
                - DeleteChannel
                - CreateCategory
                - DeleteCategory
                - ArrangeChannel
                - Invite
                - Mute
                - Unmute
                - Kick
                - Ban
                - Unban
        "401":
          description: Authentication information is missing or invalid
          content:
            text/plain:
              schema:
                type: string
                example: Authentication information is missing or invalid
        "400":
          description: Malformed request.
components:
  schemas:
    permission_setting:
      type: string
      description: Current state of a permission for a user or a permission group
      enum:
      - "TRUE"
      - "FALSE"
      - NONE
    channel_permission:
      type: string
      description: Permissions that apply only to channels
      enum:
      - All
      - ViewChannel
      - Configure
      - SendMessage
      - ReadMessage
    hub_permission:
      type: string
      description: Permissions that apply everywhere in a hub
      enum:
      - All
      - ViewChannels
      - ConfigureChannels
      - Administrate
      - CreateChannel
      - DeleteChannel
      - CreateCategory
      - DeleteCategory
      - ArrangeChannels
      - SendMessage
      - ReadMessage
      - Invite
      - Mute
      - Unmute
      - Kick
      - Ban
      - Unban
    hub_permission_map:
      type: object
      additionalProperties:
        $ref: '#/components/schemas/hub_permission_map_item'
      description: Map of hub permissions and their set values
    channel_permission_map:
      type: object
      additionalProperties:
        required:
        - channel_id
        - permissions
        type: object
        properties:
          channel_id:
            type: string
          permissions:
            $ref: '#/components/schemas/channel_permission_map_item'
      description: Map of channel UUIDs to channel permissions and their set values
    channel_permission_map_item:
      required:
      - permission
      - setting
      type: object
      properties:
        permission:
          $ref: '#/components/schemas/channel_permission'
        setting:
          $ref: '#/components/schemas/permission_setting'
      description: Channel permission and it's current setting
    hub_permission_map_item:
      required:
      - permission
      - setting
      type: object
      properties:
        permission:
          $ref: '#/components/schemas/hub_permission'
        setting:
          $ref: '#/components/schemas/permission_setting'
      description: Hub permission and it's current setting
    date:
      type: integer
      description: Time in milliseconds from 1 Jan 1970
    hub_member:
      required:
      - channel_permissions
      - groups
      - hub
      - hub_permissions
      - joined
      - nickname
      - user
      type: object
      properties:
        user:
          type: string
          description: UUID of the user this member represents
        joined:
          $ref: '#/components/schemas/date'
        hub:
          type: string
          description: UUID of the hub this member is from
        nickname:
          type: string
          description: Name used by the member when in this hub
        groups:
          type: array
          description: UUIDs of the permission groups this member is part of
          items:
            type: string
        hub_permissions:
          $ref: '#/components/schemas/hub_permission_map'
        channel_permissions:
          $ref: '#/components/schemas/channel_permission_map'
    hub:
      required:
      - bans
      - channels
      - created
      - default_group
      - groups
      - id
      - members
      - name
      - owner
      type: object
      properties:
        id:
          type: string
          description: UUID of the hub
        owner:
          type: string
          description: UUID of the user that owns the hub
        mutes:
          type: array
          description: List of IDs of users that have been muted in the hub
          items:
            type: string
        bans:
          type: array
          description: List of IDs of users that have been banned from the hub
          items:
            type: string
        default_group:
          type: string
          description: UUID of the permission group assigned to new members
        created:
          $ref: '#/components/schemas/date'
        name:
          type: string
          description: Name of the hub
        members:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/hub_members'
          description: Members of the hub
        groups:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/hub_groups'
          description: Permission groups that belong to this hub
        channels:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/hub_channels'
          description: Channels in the hub
      description: Represents a hub in a WICRS server
    permission_group:
      required:
      - channel_permissions
      - created
      - hub_permissions
      - id
      type: object
      properties:
        id:
          type: string
          description: UUID of the hub the group is in
        created:
          $ref: '#/components/schemas/date'
        hub_permissions:
          $ref: '#/components/schemas/hub_permission_map'
        channel_permissions:
          $ref: '#/components/schemas/channel_permission_map'
      description: Represents a group of permissions that can be given to any member
        of a hub the hub the group is in
    channel:
      required:
      - created
      - hub_id
      - id
      - name
      type: object
      properties:
        id:
          type: string
          description: UUID of the channel
        created:
          $ref: '#/components/schemas/date'
        name:
          type: string
          description: Name of the channel
        hub_id:
          type: string
          description: UUID of the hub the channel is in
      description: Represents a channel in a WICRS server
    message:
      required:
      - content
      - id
      - sender
      - sent
      type: object
      properties:
        id:
          type: string
          description: ID of the message
        sent:
          $ref: '#/components/schemas/date'
        sender:
          type: string
          description: UUID of the user that sent the message
        content:
          type: string
          description: Content of the sent message
        edited:
          $ref: '#/components/schemas/message_edited'
      description: Message sent in a text channel
    user:
      required:
      - created
      - email
      - id
      - in_hubs
      - oauth_service
      - username
      type: object
      properties:
        id:
          type: string
          description: ID of the user, a hash of the email and if of the account they
            used to login to their chosen OAuth2 service
        username:
          type: string
          description: Username of the user
        oauth_service:
          type: string
          description: The name of the OAuth2 service the user used to sign up
          enum:
          - GitHub
        created:
          $ref: '#/components/schemas/date'
        email:
          type: string
          description: The primary email of the account the user used for their chosen
            OAuth2 service
        in_hubs:
          type: array
          description: A list of the UUIDs of hubs the user is a member of
          items:
            type: string
            description: The UUID of a hub
      description: Represents a user of WICRS
    inline_response_200:
      type: object
      properties:
        id:
          type: string
        token:
          type: string
      description: The authentication details for the user
    hub_members:
      type: object
      properties:
        id:
          type: string
          description: UUID of the user this member represents
        group:
          $ref: '#/components/schemas/hub_member'
    hub_groups:
      required:
      - group
      - id
      type: object
      properties:
        id:
          type: string
          description: UUID of the group
        group:
          $ref: '#/components/schemas/permission_group'
    hub_channels:
      required:
      - channel
      - id
      type: object
      properties:
        id:
          type: string
          description: UUID of the channel
        channel:
          $ref: '#/components/schemas/channel'
    message_edited:
      type: object
      properties:
        times:
          type: integer
          description: How many times the message was edited
        dates:
          type: array
          items:
            $ref: '#/components/schemas/date'
      description: Times the message was edited
  responses:
    not_found:
      description: Resource does not exist or user does not have permission to access
        it
    forbidden_error:
      description: The authenticated user does not have permission to perform the
        action
      content:
        text/plain:
          schema:
            type: string
            description: Permission required to perform the operation
            enum:
            - All
            - ViewChannel
            - Configure
            - SendMessage
            - ReadMessage
            - Administrate
            - CreateChannel
            - DeleteChannel
            - CreateCategory
            - DeleteCategory
            - ArrangeChannel
            - Invite
            - Mute
            - Unmute
            - Kick
            - Ban
            - Unban
    unauthorized_error:
      description: Authentication information is missing or invalid
      content:
        text/plain:
          schema:
            type: string
            example: Authentication information is missing or invalid
    user:
      description: A single user
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/user'
    stripped_user:
      description: A single user with personal information removed (email and oauth
        service used, as well as the UUIDs of hubs they are members of, replaced with
        SHA256 hashes)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/user'
    malformed_request:
      description: Malformed request.
  parameters:
    user_id:
      name: user_id
      in: path
      description: UUID of a user
      required: true
      style: simple
      explode: false
      schema:
        type: string
    hub_id:
      name: hub_id
      in: path
      description: UUID of a hub
      required: true
      style: simple
      explode: false
      schema:
        type: string
    channel_id:
      name: channel_id
      in: path
      description: UUID of a channel in the hub
      required: true
      style: simple
      explode: false
      schema:
        type: string
    message_id:
      name: message_id
      in: path
      description: UUID of a message in the channel
      required: true
      style: simple
      explode: false
      schema:
        type: string
    group_id:
      name: groupId
      in: path
      description: UUID of a permission group
      required: true
      style: simple
      explode: false
      schema:
        type: string
    hub_permission:
      name: hub_permission
      in: path
      required: true
      style: simple
      explode: false
      schema:
        $ref: '#/components/schemas/hub_permission'
    channel_permission:
      name: channel_permission
      in: path
      required: true
      style: simple
      explode: false
      schema:
        $ref: '#/components/schemas/channel_permission'
    permission_setting:
      name: permission_setting
      in: query
      required: true
      style: form
      explode: true
      schema:
        $ref: '#/components/schemas/permission_setting'
  securitySchemes:
    user_token_auth:
      type: http
      scheme: basic
